<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>个人资料</title>
<meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="../../res/layui/css/layui.css"  media="all">
  <script src="../../res/js/common/jquery-1.11.2.min.js"></script>
</head>
<body>
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
  		<legend>个人资料信息</legend>
	</fieldset>
	<form class="layui-form" lay-filter="form-edit">
		<input type="hidden" name="adminId" id="adminId" lay-verify="title" style="width:300px;" autocomplete="off" class="layui-input">
		<div class="layui-form-item">
	    	<label class="layui-form-label">用户名:</label>
	    	<div class="layui-input-block">
	      		<input type="text" name="adminName" id="adminName" lay-verify="title" style="width:300px;" autocomplete="off" class="layui-input">
	   		</div>
	  	</div>
	  	<div class="layui-form-item">
	    	<label class="layui-form-label">密码:</label>
	    	<div class="layui-input-block">
	      		<input type="password" name="adminPwd" id="adminPwd" lay-verify="title" style="width:300px;" autocomplete="off" class="layui-input">
	   		</div>
	  	</div>
  		<div class="layui-upload">
      		<label class="layui-form-label">头像:</label>
      		<div class="layui-upload layui-input-block">
          		<input type="hidden" name="adminPictrue" value="{{d.rowdata.adminPictrue}}"/>
          		<button type="button" class="layui-btn layui-btn-primary" id="fileBtn"><i class="layui-icon">&#xe67c;</i>选择文件</button>
         	 	<button type="button" class="layui-btn layui-btn-warm" id="uploadBtn">开始上传</button>
      		</div>
  		</div>
	  	<div class="layui-form-item">
		    <label class="layui-form-label">性别:</label>
		    <div class="layui-input-block">
		      	<input type="radio" name="sex" value="男" title="男">
		      	<input type="radio" name="sex" value="女" title="女">
		    </div>
  		</div>
  		<div class="layui-form-item">
		    <div class="layui-input-block">
		      	<button class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
		    </div>
  		</div>
	</form>
	<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 --> 
	<script src="../../res/layui/layui.all.js"></script> 
	<script type="text/javascript">
		layui.use(['form','upload'], function(){
	        var form = layui.form;
	        //查询个人资料信息
	        $.ajax({ url:"../../admin/showId.action",
                type:'post',//method请求方式，get或者post
                async: false,//同步
                dataType:'json',//预期服务器返回的数据类型
                success:function(mes){//res为相应体,function为回调函数
               		$("#adminId").val(mes.adminId);
            		$("#adminName").val(mes.adminName);
            		$("#adminPwd").val(mes.adminPwd);
            		renderForm();
                }
            });
	        form.render();
		});
		//上传文件
	    function upload(){
	    	layui.upload.render({
                elem: '#fileBtn'
                ,url: '../../admin/upload.action'
                ,accept: 'file'
                ,auto: false
                ,bindAction: '#uploadBtn'
                ,before: function(){
                	layer.load(2,{shade:false});
                }
                ,done: function(res){
                	layer.closeAll("loading");
                	layer.msg(res.msg);
                	if (res.status=="1") {
                		 $("[name=adminPictrue]").val(res.obj);
                		 $("#fileBtn").html('<i class="layui-icon">&#xe67c;</i>选择文件');
                		 form.render('form-edit');
                	}
                }
            });
	    }
	    //ajax加载动画
	    $(function () {
            $.ajaxSetup({
                layerIndex:-1,
                beforeSend: function () {
                    this.layerIndex = layer.load(1, { shade: [0.8, '#ffffff'] });
                },
                complete: function () {
                    layer.close(this.layerIndex);
                },
                error: function () {
                    layer.alert('部分数据加载失败，可能会导致页面显示异常，请刷新后重试', {
                        skin: 'layui-layer-molv'
                       , closeBtn: 0
                       , shift: 4 //动画类型
                    });
                }
            });
        });
	</script>
</body>
</html>